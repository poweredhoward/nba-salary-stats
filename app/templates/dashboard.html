<!DOCTYPE html>
<html>
    <body>
        <h1>
            Analyze NBA Players' Stats and Salaries
        </h1>

        <p>
            Scatterplot
            <select id="stat_selected">
                {% for key, value in stat_options %}
                    <option value="{{value}}">{{key}}</option>
                {% endfor %}
            </select>
            <select id="year_selected">
                {% for year in year_options %}
                <option value="{{year}}">{{year}}</option>
                {% endfor %}
            </select>
            <select id="position_selected">
                {% for position in position_options %}
                <option value="{{position}}">{{position}}</option>
                {% endfor %}
            </select>
            <button id="get_scatterplot" onclick="getScatterplot()">
                Generate
            </button>
            <img id="scatterplot" src="static/scatterplot.png">

        </p>

        <p>
            Box Plot / historgram
            <img id="histogram" src="static/histogram.png">

        </p>

        <p>
            Heatmap
            <img id="heatmap" src="static.heatmap.png">
        </p>

        <button id="seed_data" onclick="seedFunction()">
            Seed DB
        </button>
    </body>

    <script>

        function getScatterplot () {
            let stat_selected = document.getElementById("stat_selected").value
            let year_selected = document.getElementById("year_selected").value
            let position_selected = document.getElementById("position_selected").value

            let params = {
                "stat_selected": stat_selected,
                "year_selected": year_selected,
                "position_selected": position_selected
            }

            post("/getVisual/scatterplot", params).then(data => {
                console.log(data)
                document.getElementById("scatterplot").src = data['scatterplot_filename'];
                document.getElementById("histogram").src = data['histogram_filename'];
                document.getElementById("heatmap").src = data['heatmap_filename'];


            })            
        }


        function seedFunction(){
            console.log("seed")
            fetch("/seed/6516854352asdffsdg").then( function(res) {
                console.log("worked")
                return res.json()
            })
        }



        async function post(url, data){
            const response = await fetch(
                url,
                {method: "POST", body: JSON.stringify(data)}
            );

            if (response.ok){
                return response.json()
            }
             
        }

    </script>
</html>